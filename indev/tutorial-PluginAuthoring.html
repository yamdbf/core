<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title> - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="/index.html">Stable</a><a href="/indev/index.html">Indev</a></h2><h3>Pages</h3><ul><li><a href="tutorial-LocalizationGuide.html">Localization Guide</a></li><li><a href="tutorial-LocalizationHelptext.html">Localizing Command helptext</a></li><li><a href="tutorial-LocalizationStrings.html">Localization string list</a></li><li><a href="tutorial-PluginAuthoring.html">Plugin Authoring Guide</a></li><li><a href="tutorial-PluginList.html">Plugin list</a></li><li><a href="tutorial-StartingInV3.html">Starting a bot in 3.0.0</a></li></ul><h3>Classes</h3><ul><li><a href="Client.html">Client</a></li><li><a href="ClientStorage.html">ClientStorage</a></li><li><a href="Command.html">Command</a></li><li><a href="CommandRegistry.html">CommandRegistry</a></li><li><a href="Database.html">Database</a></li><li><a href="GuildSettings.html">GuildSettings</a></li><li><a href="GuildStorage.html">GuildStorage</a></li><li><a href="KeyedStorage.html">KeyedStorage</a></li><li><a href="Logger.html">Logger</a></li><li><a href="Plugin.html">Plugin</a></li><li><a href="PluginLoader.html">PluginLoader</a></li><li><a href="RateLimit.html">RateLimit</a></li><li><a href="RateLimiter.html">RateLimiter</a></li><li><a href="RateLimitManager.html">RateLimitManager</a></li><li><a href="Resolver.html">Resolver</a></li><li><a href="ResolverLoader.html">ResolverLoader</a></li><li><a href="SharedProviderStorage.html">SharedProviderStorage</a></li><li><a href="SingleProviderStorage.html">SingleProviderStorage</a></li><li><a href="StorageProvider.html">StorageProvider</a></li></ul><h3>Interfaces</h3><ul><li><a href="IPlugin.html">IPlugin</a></li><li><a href="IStorageProvider.html">IStorageProvider</a></li></ul><h3>Mixins</h3><ul><li><a href="Guild.html">Guild</a></li><li><a href="Loggable.html">Loggable</a></li><li><a href="Message.html">Message</a></li></ul><h3>Modules</h3><ul><li><a href="module-CommandDecorators.html">CommandDecorators</a></li><li><a href="module-Lang.html">Lang</a></li><li><a href="module-ListenerUtil.html">ListenerUtil</a></li><li><a href="module-Middleware.html">Middleware</a></li><li><a href="module-Providers.html">Providers</a></li><li><a href="module-Time.html">Time</a></li><li><a href="module-Util.html">Util</a></li></ul><h3>Decorators</h3><ul><li><a href="global.html#deprecated">deprecated</a></li><li><a href="global.html#logger">logger</a></li></ul><h3>TypeDefs</h3><ul><li><a href="global.html#ArgOpts">ArgOpts</a></li><li><a href="global.html#BaseResolverType">BaseResolverType</a></li><li><a href="global.html#BaseStrings">BaseStrings</a></li><li><a href="global.html#CommandInfo">CommandInfo</a></li><li><a href="global.html#DefaultGuildSettings">DefaultGuildSettings</a></li><li><a href="global.html#Difference">Difference</a></li><li><a href="global.html#LocalizedCommandInfo">LocalizedCommandInfo</a></li><li><a href="global.html#LogData">LogData</a></li><li><a href="global.html#LogLevel">LogLevel</a></li><li><a href="global.html#MiddlewareFunction">MiddlewareFunction</a></li><li><a href="global.html#PluginConstructor">PluginConstructor</a></li><li><a href="global.html#ResolverConstructor">ResolverConstructor</a></li><li><a href="global.html#ResourceLoader">ResourceLoader</a></li><li><a href="global.html#StorageProviderConstructor">StorageProviderConstructor</a></li><li><a href="global.html#TemplateData">TemplateData</a></li><li><a href="global.html#Transport">Transport</a></li><li><a href="global.html#TransportFunction">TransportFunction</a></li><li><a href="global.html#Tuple">Tuple</a></li><li><a href="global.html#YAMDBFOptions">YAMDBFOptions</a></li></ul><h3>Externals</h3><ul><li><a href="external-Client.html">Client</a></li><li><a href="external-ClientOptions.html">ClientOptions</a></li><li><a href="external-Collection.html">Collection</a></li><li><a href="external-Guild.html">Guild</a></li><li><a href="external-Message.html">Message</a></li><li><a href="external-MessageOptions.html">MessageOptions</a></li><li><a href="external-PermissionResolvable.html">PermissionResolvable</a></li><li><a href="external-Role.html">Role</a></li><li><a href="external-User.html">User</a></li></ul>
</nav>

<div id="main">
    

    <section>

<header>
    

    <!-- <h2>Plugin Authoring Guide</h2> -->
</header>

<article>
    <h2>Plugin Authoring Guide</h2><p>Plugins allow developers to create modular functionality that can be used across
any number of YAMDBF bots with ease. There is no limit to what can be done via
plugins as they will have access to the instance of the Client that loads them
at runtime so they can do anything a raw Client is capable of.</p>
<p>Be sure to read the documentation for <a href="Plugin.html">Plugin</a> and <a href="IPlugin.html">IPlugin</a>
before getting started.</p>
<h2>Getting started</h2><p>The first thing to go over is exporting your plugin. Really you can export it any
way you want or need to as long as you provide an adequate explanation for other
developers to be able to use your plugin, but for simple plugins that require
no extra runtime information from the developer (like an API key or something)
a top level export via <code>module.exports = class extends Plugin</code> will allow people
using your plugin to add it to their Client simply by passing the name of the
package to their Client plugin array.</p>
<p>If you do require extra data from the developer at runtime however then I recommend
exporting a function that accepts the extra data you need as arguments and returns
your Plugin class, capturing this extra data in the function closure.</p>
<p>For example, in my <code>command-usage</code> plugin I require a channel ID to be passed in
for logging command usage to a Discord channel. I accomplish this by exporting
the following function:</p>
<pre class="prettyprint source lang-js"><code>function commandUsageFactory(channel)
{
    // `CommandUsage` being the name of my custom Plugin class
    return class extends CommandUsage
    {
        constructor(client)
        {
            super(client, channel);
        }
    };
}</code></pre><p>This function returns a class that extends my custom Plugin class, forwarding the
<code>client</code> parameter to <code>super()</code> along with the <code>channel</code> parameter passed to the
function.</p>
<blockquote>
<p>Of course if you do this, as I said earlier, you should provide an adequate
explanation of how your plugin should be used.</p>
</blockquote>
<p>A custom Plugin class must have the following two things to be considered valid:</p>
<ul>
<li>A <code>name</code> field</li>
<li>An <code>init()</code> method</li>
</ul>
<p>Example:</p>
<pre class="prettyprint source lang-js"><code>class CustomPlugin extends Plugin
{
    name = 'CustomPlugin';

    constructor(client)
    {
        super();
        this.client = client;
    }

    init(storage)
    {
        this.storage = storage;
        console.log('Custom plugin initialized.');
    }
}</code></pre><p>The <code>name</code> field is what is used for identifying the plugin if there are any errors
during plugin initialization and for accessing a plugin at runtime via the Client
instance:</p>
<pre class="prettyprint source lang-js"><code>&lt;Client>.plugins.loaded.CustomPlugin</code></pre><p>The Plugin <code>init()</code> method will be called when the plugin is loaded, which is after
all storages (including guild storages) are available but before <code>clientReady</code> is
emitted. Assuming you store the client instance passed in the Plugin constructor
like in the example above, you will be able to use it here. This method can be async
if needed to make things easier for yourself. This method will also be passed a
<code>SharedProviderStorage</code> instance specific to your plugin when called by the PluginLoader
at runtime. This should be set aside for use like in the example if storage is needed
for your plugin.</p>
<h2>Plugin tools</h2><p>There are a few methods in YAMDBF designed to make some things that would be
desirable for plugins to do easier (Or in the case of TypeScript, possible at all
by providing public workarounds to the more complex private methods). These methods
are few in number but important in your toolbox as a plugin developer:</p>
<ul>
<li><a href="module-Lang.html#setMetaValue"><code>Lang.setMetaValue(lang, key, value)</code></a></li>
<li><a href="module-Lang.html#loadLocalizationsFrom"><code>Lang.loadLocalizationsFrom(dir)</code></a></li>
<li><a href="module-Lang.html#loadCommandLocalizationsFrom"><code>Lang.loadCommandLocalizationsFrom(dir)</code></a></li>
<li><a href="CommandRegistry.html#registerExternal"><code>&lt;Client&gt;.commands.registerExternal(command)</code></a></li>
</ul>
<p><code>Lang.setMetaValue()</code> can be used to set arbitrary metadata for custom localization
languages you may be providing via your plugin. Specifically this can be used to
set a proper display name for a localization language:</p>
<pre class="prettyprint source lang-js"><code>Lang.setMetaValue('de_de', 'name', 'Deutsch');</code></pre><p>The <code>name</code> value will be used in the <code>setlang</code> command when listing available languages.</p>
<p>Loading custom localizations can be done with the next two methods in the list.
<code>Lang.loadLocalizationsFrom(dir)</code> can be used to load <code>.lang</code> files from a directory
and <code>Lang.loadCommandLocalizationsFrom(dir)</code> can be used to load <code>.lang.json</code> files
from a directory.</p>
<p>Registering custom commands can be done individually by creating an instance of your
custom command class and passing it to the last method in the list:</p>
<pre class="prettyprint source lang-js"><code>&lt;Client>.commands.registerExternal(new CustomCommand());</code></pre><p>This allows plugins to add any number of arbitrary commands for a Client to use.</p>
<p>That's about it for the basics. Anything more complex than what is explained here,
while possible, is entirely up to you as a developer. If you have any questions you
can ask them in the YAMDBF Discord server.</p>
</article>

</section>

</div>

<br class="clear">

<footer>
	<div align="right">
    	<a href="https://github.com/jsdoc3/jsdoc">JSDoc3.5.0-dev</a> | Minami
	</div>
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>