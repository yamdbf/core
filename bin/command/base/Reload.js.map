{"version":3,"sources":["command/base/Reload.ts"],"names":[],"mappings":";;;;;;;;AAEA,wCAAqC;AACrC,4DAA6C;AAC7C,yDAAsD;AAEtD,0CAAuC;AACvC,qDAA0D;AAE1D,eAAqB,SAAQ,iBAAO;IAKnC;QAEC,KAAK,CAAC;YACL,IAAI,EAAE,QAAQ;YACd,IAAI,EAAE,2CAA2C;YACjD,KAAK,EAAE,gBAAgB;YACvB,SAAS,EAAE,IAAI;SACf,CAAC,CAAC;IACJ,CAAC;IAGM,MAAM,CAAC,OAAgB,EAAE,CAAC,GAAG,CAAkB;QAErD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,6BAA6B,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;QAEzE,MAAM,YAAY,GAAW,WAAI,CAAC,GAAG,EAAE,CAAC;QAExC,MAAM,QAAQ,GAAa,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACzF,MAAM,QAAQ,GAAW,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;QAE7D,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;QACzD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC;QAErC,MAAM,SAAS,GACd,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;QAE7D,0CAA0C;QAC1C,KAAK,MAAM,OAAO,IAAI,SAAS,CAAC,MAAM,EAAE;YAAE,OAAO,CAAC,OAAO,EAAE,CAAC;QAE5D,MAAM,UAAU,GAAW,WAAI,CAAC,GAAG,EAAE,CAAC;QACtC,MAAM,aAAa,GAAW,QAAQ,CAAC,QAAQ,EAAE,CAAC;QAElD,gBAAgB;QAChB,MAAM,UAAU,GAAW,WAAI,CAAC,GAAG,EAAE,CAAC;QACtC,MAAM,WAAW,GAAW,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,CAAC;QACnE,MAAM,QAAQ,GAAW,WAAI,CAAC,GAAG,EAAE,CAAC;QAEpC,MAAM,WAAW,GAAW,CAAC,UAAU,GAAG,YAAY,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACnE,MAAM,SAAS,GAAW,CAAC,QAAQ,GAAG,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAC7D,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,kBAAkB,CAAC,EAAE,aAAa,EAAE,WAAW,EAAE,WAAW,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC;IAC9G,CAAC;CACD;AA3CA;IADC,eAAM,CAAC,gBAAgB,CAAC;0CACS;AAalC;IADC,yBAAK,CAAC,uBAAU,CAAC,QAAQ,CAAC;uCA8B1B;AA7CF,4BA8CC","file":"Reload.js","sourcesContent":["import { Collection } from 'discord.js';\nimport { Message } from '../../types/Message';\nimport { Command } from '../Command';\nimport { using } from '../CommandDecorators';\nimport { Middleware } from '../middleware/Middleware';\nimport { ResourceProxy } from '../../types/ResourceProxy';\nimport { Util } from '../../util/Util';\nimport { Logger, logger } from '../../util/logger/Logger';\n\nexport default class extends Command\n{\n\t@logger('Command:reload')\n\tprivate readonly _logger!: Logger;\n\n\tpublic constructor()\n\t{\n\t\tsuper({\n\t\t\tname: 'reload',\n\t\t\tdesc: 'Reload all custom commands and all events',\n\t\t\tusage: '<prefix>reload',\n\t\t\townerOnly: true\n\t\t});\n\t}\n\n\t@using(Middleware.localize)\n\tpublic action(message: Message, [res]: [ResourceProxy]): Promise<Message | Message[]>\n\t{\n\t\tthis._logger.log(`Reloading commands from: $${this.client.commandsDir}`);\n\n\t\tconst commandStart: number = Util.now();\n\n\t\tconst disabled: string[] = this.client.commands.filter(c => c.disabled).map(c => c.name);\n\t\tconst reloaded: number = this.client._reloadCustomCommands();\n\n\t\tthis._logger.log(`Re-initializing reloaded commands...`);\n\t\tthis.client.commands._initCommands();\n\n\t\tconst toDisable: Collection<string, Command> =\n\t\t\tthis.client.commands.filter(c => disabled.includes(c.name));\n\n\t\t// Re-disable previously disabled commands\n\t\tfor (const command of toDisable.values()) command.disable();\n\n\t\tconst commandEnd: number = Util.now();\n\t\tconst commandNumber: string = reloaded.toString();\n\n\t\t// Reload events\n\t\tconst eventStart: number = Util.now();\n\t\tconst eventNumber: string = this.client._reloadEvents().toString();\n\t\tconst eventEnd: number = Util.now();\n\n\t\tconst commandTime: string = (commandEnd - commandStart).toFixed(3);\n\t\tconst eventTime: string = (eventEnd - eventStart).toFixed(3);\n\t\treturn this.respond(message, res.CMD_RELOAD_SUCCESS({ commandNumber, commandTime, eventNumber, eventTime }));\n\t}\n}\n"],"sourceRoot":"../../../src"}