{"version":3,"sources":["command/base/SetLang.ts"],"names":[],"mappings":";;;;;;;;AACA,wCAAqC;AACrC,4DAA0D;AAE1D,gEAAkE;AAClE,kDAA+C;AAC/C,mDAAgD;AAEhD,eAAqB,SAAQ,iBAAO;IAEnC;QAEC,KAAK,CAAC;YACL,IAAI,EAAE,SAAS;YACf,OAAO,EAAE,CAAC,MAAM,CAAC;YACjB,IAAI,EAAE,oCAAoC;YAC1C,KAAK,EAAE,wBAAwB;YAC/B,iBAAiB,EAAE,CAAC,eAAe,CAAC;SACpC,CAAC,CAAC;IACJ,CAAC;IAIM,KAAK,CAAC,MAAM,CAAC,OAAgB,EAAE,CAAC,GAAG,EAAE,IAAI,CAA2B;QAE1E,IAAI,KAAK,GAAa,WAAI,CAAC,SAAS,CAAC;QACrC,EAAE,CAAC,CAAC,OAAO,IAAI,KAAK,WAAW,CAAC,CAChC,CAAC;YACA,MAAM,MAAM,GAAW,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YACxE,IAAI,KAAK,GAAa,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,WAAI,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;YACxE,IAAI,WAAW,GAAW,MAAM,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC;YACtF,WAAW,GAAG,WAAI,CAAC,YAAY,CAAC,WAAW,EAAE,MAAM,CAAC,IAAI,WAAW,CAAC;YACpE,KAAK,GAAG,KAAK;iBACX,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;iBAChC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,WAAW,EAAE,EAAE,IAAI,WAAW,EAAE,CAAC,CAAC,CAAC;YAE5D,IAAI,MAAM,GAAW,GAAG,CAAC,yBAAC,CAAC,gBAAgB,EAAE,EAAE,QAAQ,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC;YACrF,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrC,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;YAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,yBAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC;QACxF,MAAM,OAAO,GAAW,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;QACxC,MAAM,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QAC1D,GAAG,GAAG,WAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC;QACzC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,yBAAC,CAAC,mBAAmB,EACpD,EAAE,IAAI,EAAE,WAAI,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC,IAAI,OAAO,EAAE,CAAC,CAAC,CAAC;IAC5D,CAAC;CACD;AAxBA;IAFC,yBAAK,CAAC,iBAAO,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC;IACtC,+BAAW;uCAwBX;AAtCF,4BAuCC","file":"SetLang.js","sourcesContent":["import { Message } from '../../types/Message';\nimport { Command } from '../Command';\nimport { localizable, using } from '../CommandDecorators';\nimport { ResourceLoader } from '../../types/ResourceLoader';\nimport { BaseStrings as s } from '../../localization/BaseStrings';\nimport { Lang } from '../../localization/Lang';\nimport { resolve } from '../middleware/Resolve';\n\nexport default class extends Command\n{\n\tpublic constructor()\n\t{\n\t\tsuper({\n\t\t\tname: 'setlang',\n\t\t\taliases: ['lang'],\n\t\t\tdesc: 'List languages or set bot language',\n\t\t\tusage: '<prefix>setlang [lang]',\n\t\t\tcallerPermissions: ['ADMINISTRATOR']\n\t\t});\n\t}\n\n\t@using(resolve({ '[lang]': 'Number' }))\n\t@localizable\n\tpublic async action(message: Message, [res, lang]: [ResourceLoader, number]): Promise<any>\n\t{\n\t\tlet langs: string[] = Lang.langNames;\n\t\tif (typeof lang === 'undefined')\n\t\t{\n\t\t\tconst prefix: string = await this.client.getPrefix(message.guild) || '';\n\t\t\tlet names: string[] = langs.map(l => Lang.getMetaValue(l, 'name') || l);\n\t\t\tlet currentLang: string = await message.guild.storage.settings.get('lang') || 'en_us';\n\t\t\tcurrentLang = Lang.getMetaValue(currentLang, 'name') || currentLang;\n\t\t\tnames = names\n\t\t\t\t.map((l, i) => `${i + 1}:  ${l}`)\n\t\t\t\t.map(l => l.replace(` ${currentLang}`, `*${currentLang}`));\n\n\t\t\tlet output: string = res(s.CMD_SETLANG_LIST, { langList: names.join('\\n'), prefix });\n\t\t\treturn message.channel.send(output);\n\t\t}\n\n\t\tif (!((lang - 1) in langs)) return message.channel.send(res(s.CMD_SETLANG_ERR_INVALID));\n\t\tconst newLang: string = langs[lang - 1];\n\t\tawait message.guild.storage.settings.set('lang', newLang);\n\t\tres = Lang.createResourceLoader(newLang);\n\t\treturn message.channel.send(res(s.CMD_SETLANG_SUCCESS,\n\t\t\t{ lang: Lang.getMetaValue(newLang, 'name') || newLang }));\n\t}\n}\n"],"sourceRoot":"../../../src"}