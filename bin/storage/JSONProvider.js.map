{"version":3,"sources":["storage/JSONProvider.ts"],"names":[],"mappings":";;AACA,uDAAoD;AACpD,mCAAoC;AAEpC,MAAa,YAAa,SAAQ,iCAAe;IAKhD,YAAmB,IAAY;QAE9B,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACnB,CAAC;IAEM,KAAK,CAAC,IAAI;QAEhB,IAAI,CAAC,GAAG,GAAG,IAAI,EAAE,CAAC,WAAW,IAAI,CAAC,KAAK,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IACxD,CAAC;IAEM,KAAK,CAAC,IAAI;QAEhB,IACA;YACC,IAAI,IAAI,GAAW,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YACzC,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACzB;QACD,WAAM;YAAE,OAAO,EAAE,CAAC;SAAE;IACrB,CAAC;IAEM,KAAK,CAAC,GAAG,CAAC,GAAW;QAE3B,IAAI,OAAO,GAAG,KAAK,WAAW;YAAE,MAAM,IAAI,SAAS,CAAC,sBAAsB,CAAC,CAAC;QAC5E,IAAI,OAAO,GAAG,KAAK,QAAQ;YAAE,MAAM,IAAI,SAAS,CAAC,sBAAsB,CAAC,CAAC;QAEzE,IACA;YACC,IAAI,IAAI,GAAW,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC;YAC/C,OAAO,IAAI,CAAC;SACZ;QACD,WAAM;YAAE,OAAO,SAAS,CAAC;SAAE;IAC5B,CAAC;IAEM,KAAK,CAAC,GAAG,CAAC,GAAW,EAAE,KAAa;QAE1C,IAAI,OAAO,GAAG,KAAK,WAAW;YAAE,MAAM,IAAI,SAAS,CAAC,sBAAsB,CAAC,CAAC;QAC5E,IAAI,OAAO,GAAG,KAAK,QAAQ;YAAE,MAAM,IAAI,SAAS,CAAC,sBAAsB,CAAC,CAAC;QACzE,IAAI,OAAO,KAAK,KAAK,WAAW;YAAE,MAAM,IAAI,SAAS,CAAC,wBAAwB,CAAC,CAAC;QAChF,IAAI,OAAO,KAAK,KAAK,QAAQ;YAAE,MAAM,IAAI,SAAS,CAAC,wBAAwB,CAAC,CAAC;QAE7E,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC;IAEM,KAAK,CAAC,MAAM,CAAC,GAAW;QAE9B,IAAI,OAAO,GAAG,KAAK,WAAW;YAAE,MAAM,IAAI,SAAS,CAAC,sBAAsB,CAAC,CAAC;QAC5E,IAAI,OAAO,GAAG,KAAK,QAAQ;YAAE,MAAM,IAAI,SAAS,CAAC,sBAAsB,CAAC,CAAC;QAEzE,IAAI;YAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC;SAAE;QACnC,WAAM;YAAE,OAAO;SAAE;IAClB,CAAC;IAEM,KAAK,CAAC,KAAK;QAEjB,IAAI;YAAE,KAAK,MAAM,GAAG,IAAI,MAAM,IAAI,CAAC,IAAI,EAAE;gBAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC;SAAE;QACxE,WAAM;YAAE,OAAO;SAAE;IAClB,CAAC;CACD;AA/DD,oCA+DC","file":"JSONProvider.js","sourcesContent":["import { IStorageProvider } from './interface/IStorageProvider';\nimport { StorageProvider } from './StorageProvider';\nimport DB = require('node-json-db');\n\nexport class JSONProvider extends StorageProvider implements IStorageProvider\n{\n\tprivate readonly _name: string;\n\tprivate _db!: DB;\n\n\tpublic constructor(name: string)\n\t{\n\t\tsuper();\n\t\tthis._name = name;\n\t}\n\n\tpublic async init(): Promise<void>\n\t{\n\t\tthis._db = new DB(`storage/${this._name}`, true, true);\n\t}\n\n\tpublic async keys(): Promise<string[]>\n\t{\n\t\ttry\n\t\t{\n\t\t\tlet data: object = this._db.getData('/');\n\t\t\treturn Object.keys(data);\n\t\t}\n\t\tcatch { return []; }\n\t}\n\n\tpublic async get(key: string): Promise<string | undefined>\n\t{\n\t\tif (typeof key === 'undefined') throw new TypeError('Key must be provided');\n\t\tif (typeof key !== 'string') throw new TypeError('Key must be a string');\n\n\t\ttry\n\t\t{\n\t\t\tlet data: string = this._db.getData(`/${key}`);\n\t\t\treturn data;\n\t\t}\n\t\tcatch { return undefined; }\n\t}\n\n\tpublic async set(key: string, value: string): Promise<void>\n\t{\n\t\tif (typeof key === 'undefined') throw new TypeError('Key must be provided');\n\t\tif (typeof key !== 'string') throw new TypeError('Key must be a string');\n\t\tif (typeof value === 'undefined') throw new TypeError('Value must be provided');\n\t\tif (typeof value !== 'string') throw new TypeError('Value must be a string');\n\n\t\tthis._db.push(`/${key}`, value, true);\n\t}\n\n\tpublic async remove(key: string): Promise<void>\n\t{\n\t\tif (typeof key === 'undefined') throw new TypeError('Key must be provided');\n\t\tif (typeof key !== 'string') throw new TypeError('Key must be a string');\n\n\t\ttry { this._db.delete(`/${key}`); }\n\t\tcatch { return; }\n\t}\n\n\tpublic async clear(): Promise<void>\n\t{\n\t\ttry { for (const key of await this.keys()) this._db.delete(`/${key}`); }\n\t\tcatch { return; }\n\t}\n}\n"],"sourceRoot":"../../src"}